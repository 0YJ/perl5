=encoding utf8

=head1 NAME

[ this is a template for a new perldelta file. Any text flagged as
XXX needs to be processed before release. ]

perldelta - what is new for perl v5.13.3

=head1 DESCRIPTION

This document describes differences between the 5.13.3 release and
the 5.13.2 release.

If you are upgrading from an earlier release such as 5.13.1, first read
L<perl5132delta>, which describes differences between 5.13.1 and
5.13.2.

=head1 Notice

XXX Any important notices here

=head1 Core Enhancements

XXX New core language features go here. Summarise user-visible core language
enhancements. Particularly prominent performance optimisations could go
here, but most should go in the L</Performance Enhancements> section.

[ List each enhancement as a =head2 entry ]

=head2 C<\N{I<name>}> and C<charnames> enhancements

C<\N{}> and C<charnames::vianame> now know about the abbreviated character
names listed by Unicode, such as NBSP, SHY, LRO, ZWJ, etc., as well as all the
customary abbreviations for the C0 and C1 control characters (such as ACK, BEL,
CAN, etc.), as well as a few new variants in common usage of some C1 full
names.

In the past, it was ineffective to override one of Perl's abbreviations with
your own custom alias.  Now it works.

And you can create a custom alias directly to the ordinal of a character, known
by C<\N{...}>, C<charnames::vianame()>, and C<charnames::viacode()>.
Previously, an alias had to be to an official Unicode character name.  This
made it impossible to create an alias for a code point that had no name,
such as the ones reserved for private use.  So this change allows you to make
more effective use of private use characters.  Only if there is no official
name will C<charnames::viacode()> return your custom one.

See L<charnames> for details on all these changes.

=head2 Other enhancements

=over

=item *

Uppercase X/B allowed in hexadecimal/binary literals (RT#76296) (a674e8d)

=back

=head1 Security

XXX Any security-related notices go here.  In particular, any security
vulnerabilities closed should be noted here rather than in the
L</Selected Bug Fixes> section.

[ List each security issue as a =head2 entry ]

=head1 Incompatible Changes

XXX For a release on a stable branch, this section aspires to be:

    There are no changes intentionally incompatible with 5.XXX.XXX. If any
    exist, they are bugs and reports are welcome.

[ List each incompatible change as a =head2 entry ]

=head1 Deprecations

XXX Any deprecated features, syntax, modules etc. should be listed here.
In particular, deprecated modules should be listed here even if they are
listed as an updated module in the L</Modules and Pragmata> section.

[ List each deprecation as a =head2 entry ]

=head2 Omitting a space between regular expression and subsequent word

Omitting a space between a regex pattern or pattern modifiers and the
following word is deprecated. Deprecation for regular expression matches
was added in Perl 5.13.2.  In this release, the deprecation is extended
to regular expression substitutions. For example, 
C<< s/foo/bar/sand $bar >> will still be parsed as
C<< s/foo/bar/s and $bar >> but will issue a warning.  

=head2 Deprecation warning added for deprecated-in-core .pl libs

This is a mandatory warning, not obeying -X or lexical warning bits.
The warning is modelled on that supplied by deprecate.pm for
deprecated-in-core .pm libraries.  It points to the specific CPAN
distribution that contains the .pl libraries. The CPAN version, of
course, does not generate the warning. (0111154)

=head1 Performance Enhancements

XXX Changes which enhance performance without changing behaviour go here. There
may well be none in a stable release.

[ List each enhancement as a =item entry ]

=over 4

=item *

There are several small optimizations to improve CPU cache performance

=back

=head1 Modules and Pragmata

XXX All changes to installed files in F<cpan/>, F<dist/>, F<ext/> and F<lib/>
go here.  If Module::CoreList is updated, generate an initial draft of the
following sections using F<Porting/corelist-perldelta.pl>, which prints stub
entries to STDOUT.  Results can be pasted in place of the '=head2' entries
below.  A paragraph summary for important changes should then be added by hand.
In an ideal world, dual-life modules would have a F<Changes> file that could be
cribbed.

[ Within each section, list entries as a =item entry ]

=head2 New Modules and Pragmata

=over 4

=item *

XXX

=back

=head2 Updated Modules and Pragmata

XXX Make sure these get sorted, are phrased similarly and all version
numbers are correct

=over 4

=item *

autodie updated to CPAN version 2.10 (a009834)

=item *

charnames -- viacode() is now significantly faster (f3227b7)

=item *

version now prevents object methods from being called as class methods
(d808b68)

=item *

warnings updated to 1.10.  Calling C<use warnings> without
arguments is now significantly more efficient. (8452af9)

=item *

Archive-Extract updated to CPAN version 0.42 (d7f8799)

Updates since 0.38 include: a safe print method that Michael Schwern
contributed, that guards Archive::Extract from changes to $\; a
fix to the tests when run in core perl from Robin Barker; and
support for TZ files contributed by Paul Marquess, who also supplied a
modification for the lzma logic to favour IO::Uncompress::Unlzma

=item *

Archive-Tar updated to version 1.64 (afabe0e)

Important changes since 1.54 include: compatibility with busybox
implementations of tar which was added by Mark Swayne; a fix so
that write() and create_archive() close only handles
they opened by Darrell K.; and a bug was fixed regarding the exit code
of extract_archive which was spotted by and upstreamed from RedHat by
Martin Cermak.

=item *

Attribute-Handlers updated to CPAN version 0.88 (f2ea78b)

=item *

Compress-Raw-Bzip2 updated to CPAN version 2.027 (9e09409)

=item *

Compress-Raw-Zlib updated  to CPAN version 2.027 (f02c02e)

=item *

CPANPLUS updated to version 0.9007 (d4e225a)

Fix the shell test to skip if test is not being run under a
terminal; resolved the issue where a prereq on Config would not be
recognised as a core module

=item *

Digest-MD5 updated to CPAN version 2.40 (326fafa)

=item *

Digest-SHA updated to CPAN version 5.48 (dfe1edc)

=item *

Exporter no longer overrides C<$SIG{__WARN__}> (RT #74472) (9b86bb5)

=item *

ExtUtils-CBuilder updated to CPAN version 0.2703 (7b0eef9)

=item *

ExtUtils-Manifest updated to CPAN version 1.58 (49c6bc4)

=item *

ExtUtil-ParseXS updated to version 2.2206 (494e8c4)

=item *

File::Copy skips suid tests on a nosuid partition (cae9400)

=item *

IO-Compress upated to CPAN version 2.027 (e8796d6)

=item *

IPC-Cmd updated to CPAN version 0.60 (e667e1e)

=item *

IPC-SysV updated to CPAN version 2.03 (10613b6)

=item * 

Locale::Maketext guts have been merged back into the main module (87d86da)
and adds external cache support (ace47d6)

=item *

Module-Build updated to CPAN version 0.3607 (40c9afb)

=item *

Module-Load updated to CPAN version 0.18 (93eaa32)

=item *

Time-HiRes updated to CPAN version 1.9721 (68c5b4d)

=item *

Time-Piece updated to CPAN version 1.20 (90d55c2)

=item *

Unicode-Collate updated to CPAN version 0.53.  Includes Unicode Collation
Algorithm 18 (74b94a7)

=item *

Unicode-Normalize updated to CPAN release 1.06 (a96160d)

=back

=head2 Removed Modules and Pragmata

=over 4

=item *

XXX

=back

=head1 Documentation

XXX Changes to files in F<pod/> go here.  Consider grouping entries by
file and be sure to link to the appropriate page, e.g. L<perlfunc>.

[ Within each section, list entries as a =item entry ]

=head2 New Documentation

XXX Changes which create B<new> files in F<pod/> go here.

=head3 L<perl5121delta>

The Perl 5.12.1 perldelta file was added from the Perl maintenance branch

=head2 Changes to Existing Documentation

XXX Changes which significantly change existing files in F<pod/> go here.
However, any changes to F<pod/perldiag.pod> should go in the L</Diagnostics>
section.

=head3 General changes

=over

=item *

Octal character escapes in documentation now prefer either the C<\gDIGIT>
escape or else a three-digit octal escape as they have less ambiguity than
other forms of octal escapes.  (ce7b6f0) (d8b950d)

=item *

Documentation now standardizes on the term 'capture group' over 'buffer'
in regular expression documentation(c27a5cf)

=back

=head3 L<perlfunc>

=over

=item *

Added cautionary note about "no VERSION" (e0de7c2)

=item *

Add additional notes regarding srand and forking (d460397)

=back

=head3 L<perlop>

=over 4

=item *

Improved documentation of unusual character escapes (bf82ca4)

=back

=head3 L<perlrun>

=over

=item *

Clarifies the behavior of the C<-0NNN> switch for C<-0400> or higher (7ba31cb)

=back

=head3 L<perlpolicy>

=over

=item *

Added the policy on compatibility and deprecation along with definitions of
terms like "deprecation" (70e4a83)

=back

=head3 L<perltie>

=over

=item *

Some examples updated for modern Perl style (67d00dd)

=back

=head1 Diagnostics

The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see L<perldiag>.

XXX New or changed warnings emitted by the core's C<C> code go here. Also
include any changes in L<perldiag> that reconcile it to the C<C> code.

[ Within each section, list entries as a =item entry ]

=head2 New Diagnostics

XXX Newly added diagnostic messages go here

=over 4

=item *

XXX

=back

=head2 Changes to Existing Diagnostics

XXX Changes (i.e. rewording) of diagnostic messages go here

=over 4

=item *

XXX

=back

=head1 Utility Changes

XXX Changes to installed programs such as F<perlbug> and F<xsubpp> go
here. Most of these are built within the directories F<utils> and F<x2p>.

=head3 L<perldb>

=over

=item *

The remote terminal works after forking and spawns new sessions - one
for each forked process.

=item * 

Uses the less pager path from Config instead of searching for it (bf320d6)

=back


=head1 Configuration and Compilation

XXX Changes to F<Configure>, F<installperl>, F<installman>, and analogous tools
go here.  Any other changes to the Perl build process should be listed here.
However, any platform-specific changes should be listed in the
L</Platform Support> section, instead.

[ List changes as a =item entry ].

=over 4

=item *

Adjusts 'make test.valgrind' to account for cpan/dist/ext separation. (e07ce2e)

=back

=head1 Testing

XXX Any significant changes to the testing of a freshly built perl should be
listed here.  Changes which create B<new> files in F<t/> go here as do any
large changes to the testing harness (e.g. when parallel testing was added).
Changes to existing files in F<t/> aren't worth summarising, although the bugs
that they represent may be covered elsewhere.

[ List each test improvement as a =item entry ]

=over 4

=item *

F<t/harness> clears PERL5LIB, PERLLIB, PERL5OPT as t/TEST does (a2d3de1)

=item *

Many common testing routines were refactored into t/lib/common.pl

=item *

Several test files have been modernized to use Test::More

=back

=head1 Platform Support

XXX Any changes to platform support should be listed in the sections below.

[ Within the sections, list each platform as a =item entry with specific
changes as paragraphs below it. ]

=head2 New Platforms

XXX List any platforms that this version of perl compiles on, that previous
versions did not. These will either be enabled by new files in the F<hints/>
directories, or new subdirectories and F<README> files at the top level of the
source tree.

=over 4

=item XXX-some-platform

XXX

=back

=head2 Discontinued Platforms

XXX List any platforms that this version of perl no longer compiles on.

=over 4

=item MacOS Classic

Support for MacOS Classic within ExtUtils::MakeMaker was removed from Perl in
December 2004.  Vestigial MacOS Classic specific code has now been removed
from other core modules as well.

=back

=head2 Platform-Specific Notes

XXX List any changes for specific platforms. This could include configuration
and compilation changes or changes in portability/compatibility.  However,
changes within modules for platforms should generally be listed in the
L</Modules and Pragmata> section.

=over 4

=item Win32

t/io/openpid.t now uses the alarm() watchdog strategy for more
robustness. (5732108)

=back

=head1 Internal Changes

XXX Changes which affect the interface available to C<XS> code go here.
Other significant internal changes for future core maintainers should
be noted as well.

[ List each improvement as a =item entry ]

=over 4

=item *

XXX Lots of block hook changes (PL_blockhooks) -- needs an overall summary

=item *

Added C<BhkENABLE> and C<BhkDISABLE> macros to en/disable blockhook entries.
This allows the individual callbacks to be switched on and off as
necessary, without removing the entry from PL_blockhooks. (a3e07c8)

=item *

Added C<Perl_croak_no_modify()> to implement 
C<Perl_croak("%s", PL_no_modify)>. (6ad8f25)

=item *

Added prototypes for C<tie()> and C<untie()> to allow overloading. (RT#75902)
(1db4d19)

=item * 

Adds C<my_[l]stat_flags()> to replace C<my_[l]stat()>.  C<my_stat()> and
C<my_lstat()> call get magic on the stack arg, so create C<_flags()>
variants that allow us to control this. (0d7d409)

=back

=head1 Selected Bug Fixes

XXX Important bug fixes in the core language are summarised here.
Bug fixes in files in F<ext/> and F<lib/> are best summarised in
L</Modules and Pragmata>.

[ List each fix as a =item entry ]

=over 4

=item *

Fixed readline() when interrupted by signals so it no longer returns
the "same thing" as before or random memory.

=item *

Fixed a regression of kill() when a match variable is used for the
process ID to kill.  (RT#75812) (8af710e)

=item *

Fixed several subtle bugs in sort() when @_ is accessed within a subroutine
used for sorting. (RT#72334) (8f443ca)

=item *

Catch yyparse() exceptions in C<< (?{...}) >> (RT#2353) (634d691)

=item *

Avoid UTF-8 cache panics with offsets beyond a string (RT #75898) (3e2d381)

=item *

Fixed POSIX::strftime memory leak (RT#73520) (c4bc4aa)

=item *

Doesn't set strict with C<no VERSION> if C<VERSION> is greater than 5.12.
(da8fb5d)

=item *

Avoids multiple FETCH/stringify on filetest ops (40c852d)

=item *

Fixed issue with string C<eval> not detecting taint of overloaded/tied
arguments (RT #75716) (895b760)

=item *

Fix potential crashes of string C<eval> when evaluating a object with
overloaded stringification by creating a stringified copy when necessary
(3e5c018)

=item *

Fixed bug where overloaded stringification could remove tainting
(RT #75716) (a02ec77)

=item *

Plugs more memory leaks in vms.c. (9e2bec0)

=item *

Fix pthread include error for Time::Piece (e9f284c)

=back

=head1 Known Problems

XXX Descriptions of platform agnostic bugs we know we can't fix go here. Any
tests that had to be C<TODO>ed for the release would be noted here, unless
they were specific to a particular platform (see below).

This is a list of some significant unfixed bugs, which are regressions
from either 5.XXX.XXX or 5.XXX.XXX.

[ List each fix as a =item entry ]

=over 4

=item *

readline() returns an empty string instead of undef when it is
interrupted by a signal.

=back

=head1 Errata

=over 4

=item *

Retroactively added the Acknowledgements list to L<perl5132delta>,
which was excluded in the original release (d1e2db0)

=back

=head1 Obituary

XXX If any significant core contributor has died, we've added a short obituary
here.

=head1 Acknowledgements

XXX The list of people to thank goes here.

=head1 Reporting Bugs

If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at http://rt.perl.org/perlbug/ .  There may also be
information at http://www.perl.org/ , the Perl Home Page.

If you believe you have an unreported bug, please run the B<perlbug>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of C<perl -V>, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.

If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please send
it to perl5-security-report@perl.org. This points to a closed subscription
unarchived mailing list, which includes all the core committers, who be able
to help assess the impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the problem across all
platforms on which Perl is supported. Please only use this address for
security issues in the Perl core, not for modules independently
distributed on CPAN.

=head1 SEE ALSO

The F<Changes> file for an explanation of how to view exhaustive details
on what changed.

The F<INSTALL> file for how to build Perl.

The F<README> file for general stuff.

The F<Artistic> and F<Copying> files for copyright information.

=cut
